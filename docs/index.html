<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>BOT DASHBOARD PRO</title>

<style>

*{margin:0;padding:0;box-sizing:border-box;}

body{
font-family:system-ui;
background:#070707;
color:white;
display:flex;
min-height:100vh;
overflow-x:hidden;
}

/* ================= SIDEBAR ================= */

.sidebar{
width:230px;
background:#0f0f0f;
padding:25px;
border-right:1px solid #1f1f1f;
}

.logo{
font-size:22px;
font-weight:bold;
margin-bottom:40px;
background:linear-gradient(90deg,#00ffd5,#4da3ff);
-webkit-background-clip:text;
color:transparent;
}

.menu div{
padding:12px;
border-radius:10px;
cursor:pointer;
margin-bottom:10px;
transition:.3s;
}

.menu div:hover{background:#1b1b1b;}

/* ================= MAIN ================= */

.main{flex:1;padding:25px;}

/* ================= STATS ================= */

.stats{
display:flex;
gap:15px;
margin-bottom:25px;
flex-wrap:wrap;
}

.stat{
flex:1;
background:#111;
padding:20px;
border-radius:14px;
border:1px solid #222;
}

.stat span{font-size:26px;font-weight:bold;}

/* ================= FILTER ================= */

.filters{
display:flex;
gap:12px;
margin-bottom:20px;
flex-wrap:wrap;
}

select,input{
background:#141414;
border:none;
color:white;
padding:10px;
border-radius:8px;
}

/* ================= CARD ================= */

.card{
display:flex;
align-items:center;
background:#101010;
padding:15px;
border-radius:14px;
margin-bottom:12px;
border:1px solid #1f1f1f;

opacity:0;
transform:translateY(20px) scale(.97);
animation:cardIn .5s ease forwards;
}

@keyframes cardIn{
to{
opacity:1;
transform:translateY(0) scale(1);
}
}

.card:hover{
transform:translateY(-3px);
background:#181818;
}

.group-img{
width:65px;
height:65px;
border-radius:12px;
margin-right:15px;
object-fit:cover;
}

.section-title{
margin:25px 0 12px;
font-size:20px;
}

.empty{opacity:.5;margin-top:20px;}

.search{width:220px;}

/* ================= SKELETON ================= */

.skeleton{
height:90px;
border-radius:14px;
margin-bottom:12px;
background:linear-gradient(
90deg,
#111 25%,
#1c1c1c 50%,
#111 75%);
background-size:400% 100%;
animation:skeleton 1.2s infinite;
}

@keyframes skeleton{
0%{background-position:100% 0}
100%{background-position:-100% 0}
}

</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
<div class="logo">ðŸ¤– BOT PRO</div>

<div class="menu">
<div onclick="showPage('result')">ðŸ“Œ Hasil Posting</div>
<div onclick="showPage('schedule')">ðŸ“… Schedule</div>
</div>
</div>

<!-- MAIN -->
<div class="main">

<div class="stats">
<div class="stat"><h3>Total Posting</h3><span id="totalPost">0</span></div>
<div class="stat"><h3>Total Group</h3><span id="totalGroup">0</span></div>
<div class="stat"><h3>Akun Aktif</h3><span id="totalAccount">0</span></div>
</div>

<!-- RESULT -->
<div id="resultPage">

<div class="section-title">ðŸ“Œ Hasil Posting</div>

<div class="filters">
<select id="accountFilter">
<option value="all">Semua Akun</option>
</select>

<input type="date" id="dateFilter">
<input class="search" id="searchBox" placeholder="Cari group...">
</div>

<div id="list"></div>

</div>

<!-- SCHEDULE -->
<div id="schedulePage" style="display:none">

<div class="section-title">ðŸ“… Jadwal Posting</div>

<div class="filters">
<select id="scheduleAccountFilter">
<option value="all">Semua Akun</option>
</select>

<input type="date" id="calendar">
</div>

<div id="schedule-list"></div>

</div>

</div>

<script>

/* NAVIGATION */

function showPage(page){
resultPage.style.display=page==="result"?"block":"none";
schedulePage.style.display=page==="schedule"?"block":"none";
}

/* ================= RESULT ================= */

const container=document.getElementById("list");

/* SKELETON */
container.innerHTML=
Array(6).fill('<div class="skeleton"></div>').join('');

fetch("data.json?"+Date.now(),{cache:"no-store"})
.then(r=>r.json())
.then(data=>{

const dropdown=accountFilter;
const dateInput=dateFilter;
const search=searchBox;

dateInput.value=new Date().toISOString().slice(0,10);

[...new Set(data.map(i=>i.account))]
.forEach(acc=>{
const o=document.createElement("option");
o.value=acc;
o.textContent=acc;
dropdown.appendChild(o);
});

totalPost.textContent=data.length;
totalGroup.textContent=new Set(data.map(i=>i.group_name)).size;
totalAccount.textContent=new Set(data.map(i=>i.account)).size;

function render(){

container.style.opacity=0;

setTimeout(()=>{

container.innerHTML="";

const filtered=data.filter(item=>{

const acc=dropdown.value==="all"||item.account===dropdown.value;
const date=!dateInput.value||item.tanggal===dateInput.value;
const searchMatch=item.group_name.toLowerCase()
.includes(search.value.toLowerCase());

return acc&&date&&searchMatch;
});

if(!filtered.length){
container.innerHTML=`<div class="empty">Tidak ada posting.</div>`;
}else{

filtered.forEach((item,index)=>{
container.innerHTML+=`
<div class="card" style="animation-delay:${index*80}ms">
<img src="${item.group_photo||'https://via.placeholder.com/70'}" class="group-img">
<div>
<div class="group-name">${item.group_name}</div>
<div class="caption">${item.caption}</div>
</div>
</div>`;
});
}

container.style.opacity=1;

},120);
}

render();

dropdown.onchange=render;
dateInput.onchange=render;
search.oninput=render;

});

/* ================= SCHEDULE ================= */

const scheduleContainer=document.getElementById("schedule-list");

scheduleContainer.innerHTML=
Array(6).fill('<div class="skeleton"></div>').join('');

fetch("schedule.json?"+Date.now(),{cache:"no-store"})
.then(r=>r.json())
.then(scheduleData=>{

calendar.value=new Date().toISOString().slice(0,10);

const allItems=Object.values(scheduleData).flat();

[...new Set(allItems.map(i=>i.account))]
.forEach(acc=>{
const o=document.createElement("option");
o.value=acc;
o.textContent=acc;
scheduleAccountFilter.appendChild(o);
});

function renderSchedule(){

scheduleContainer.style.opacity=0;

setTimeout(()=>{

scheduleContainer.innerHTML="";

const date=calendar.value;

if(!scheduleData[date]){
scheduleContainer.innerHTML=`<div class="empty">Tidak ada jadwal.</div>`;
scheduleContainer.style.opacity=1;
return;
}

const filtered=scheduleData[date].filter(i=>
scheduleAccountFilter.value==="all"||
i.account===scheduleAccountFilter.value
);

if(!filtered.length){
scheduleContainer.innerHTML=`<div class="empty">Tidak ada jadwal akun ini.</div>`;
}else{

filtered.forEach((item,index)=>{
scheduleContainer.innerHTML+=`
<div class="card" style="animation-delay:${index*80}ms">
<img src="${item.group_photo||'https://via.placeholder.com/70'}" class="group-img">
<div>
<div class="group-name">${item.group_name}</div>
<div class="caption">${item.caption}</div>
</div>
</div>`;
});
}

scheduleContainer.style.opacity=1;

},120);
}

renderSchedule();

calendar.onchange=renderSchedule;
scheduleAccountFilter.onchange=renderSchedule;

});

</script>

</body>
</html>
