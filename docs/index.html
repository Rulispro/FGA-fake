<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dashboard Bot</title>

<style>

*{box-sizing:border-box;}

body{
  font-family:system-ui,Arial;
  background:radial-gradient(circle at top,#1a1a1a,#090909);
  color:white;
  padding:20px;
  animation:fadePage .6s ease;
}

@keyframes fadePage{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}

h2{
  font-size:26px;
  background:linear-gradient(90deg,#00ffd5,#4da3ff);
  -webkit-background-clip:text;
  color:transparent;
}

/* ===== SECTION ===== */
.section-title{
  margin-top:40px;
  margin-bottom:12px;
  font-size:18px;
  opacity:.8;
}

/* ===== FILTER ===== */
.filters{
  display:flex;
  gap:12px;
  margin-bottom:20px;
}

select,input[type="date"]{
  padding:10px 14px;
  border-radius:10px;
  border:none;
  background:#1e1e1e;
  color:white;
  transition:.3s;
}

select:hover,input:hover{
  background:#2a2a2a;
}

/* ===== CARD ===== */
.card{
  display:flex;
  align-items:center;
  background:rgba(30,30,30,.7);
  backdrop-filter:blur(10px);
  padding:15px;
  border-radius:14px;
  margin-bottom:15px;
  border:1px solid rgba(255,255,255,.05);

  transform:translateY(10px);
  opacity:0;
  animation:cardIn .4s ease forwards;
}

.card:hover{
  transform:translateY(-4px) scale(1.01);
  background:#242424;
  box-shadow:0 10px 25px rgba(0,0,0,.6);
}

@keyframes cardIn{
  to{transform:translateY(0);opacity:1;}
}

/* IMAGE */
.group-img{
  width:70px;
  height:70px;
  object-fit:cover;
  border-radius:12px;
  margin-right:15px;
  transition:.3s;
}

.card:hover .group-img{
  transform:scale(1.05);
}

/* INFO */
.group-info{flex:1;}

.group-name{
  font-size:18px;
  font-weight:bold;
  margin-bottom:6px;
}

.caption{
  font-size:14px;
  opacity:.75;
}

.empty{
  opacity:.5;
  margin-top:20px;
}

/* SMOOTH RELOAD */
#list,#schedule-list{
  transition:.3s;
}

</style>
</head>

<body>

<h2>ðŸ¤– Dashboard Bot</h2>

<!-- ================= HASIL POSTING ================= -->
<div class="section-title">ðŸ“Œ Hasil Posting</div>

<div class="filters">
<select id="accountFilter">
<option value="all">Semua Akun</option>
</select>

<input type="date" id="dateFilter">
</div>

<div id="list"></div>


<!-- ================= SCHEDULE ================= -->
<div class="section-title">ðŸ“… Jadwal Posting (Dari Excel)</div>

<div class="filters">
<select id="scheduleAccountFilter">
<option value="all">Semua Akun</option>
</select>

<input type="date" id="calendar">
</div>

<div id="schedule-list"></div>


<script>

// ======================== DATA.JSON ========================
fetch("data.json?nocache="+Date.now())
.then(res=>res.json())
.then(data=>{

const container=document.getElementById("list");
const dropdown=document.getElementById("accountFilter");
const dateInput=document.getElementById("dateFilter");

const today=new Date().toISOString().slice(0,10);
dateInput.value=today;

// dropdown akun
[...new Set(data.map(i=>i.account))]
.forEach(acc=>{
 const opt=document.createElement("option");
 opt.value=acc;
 opt.textContent=acc;
 dropdown.appendChild(opt);
});

function render(){

container.style.opacity=0;

setTimeout(()=>{

container.innerHTML="";

const filtered=data.filter(item=>{
 const matchAccount=dropdown.value==="all"||item.account===dropdown.value;
 const matchDate=!dateInput.value||item.tanggal===dateInput.value;
 return matchAccount&&matchDate;
});

if(!filtered.length){
 container.innerHTML=`<div class="empty">Tidak ada postingan.</div>`;
}else{
 filtered.forEach(item=>{
 container.innerHTML+=`
 <div class="card">
   <img src="${item.group_photo||'https://via.placeholder.com/70'}" class="group-img">
   <div class="group-info">
     <div class="group-name">${item.group_name}</div>
     <div class="caption">${item.caption}</div>
   </div>
 </div>`;
 });
}

container.style.opacity=1;

},150);
}

render();
dropdown.addEventListener("change",render);
dateInput.addEventListener("change",render);

});


// ======================== SCHEDULE.JSON ========================
fetch("schedule.json?nocache="+Date.now())
.then(res=>res.json())
.then(scheduleData=>{

const calendar=document.getElementById("calendar");
const list=document.getElementById("schedule-list");
const accountFilter=document.getElementById("scheduleAccountFilter");

const today=new Date().toISOString().slice(0,10);
calendar.value=today;

// dropdown akun schedule
const allItems=Object.values(scheduleData).flat();
[...new Set(allItems.map(i=>i.account))]
.forEach(acc=>{
 const opt=document.createElement("option");
 opt.value=acc;
 opt.textContent=acc;
 accountFilter.appendChild(opt);
});

function renderSchedule(){

list.style.opacity=0;

setTimeout(()=>{

list.innerHTML="";

const date=calendar.value;

if(!scheduleData[date]){
 list.innerHTML=`<div class="empty">Tidak ada jadwal.</div>`;
 list.style.opacity=1;
 return;
}

const filtered=scheduleData[date].filter(item=>
 accountFilter.value==="all"||
 item.account===accountFilter.value
);

if(!filtered.length){
 list.innerHTML=`<div class="empty">Tidak ada jadwal akun ini.</div>`;
}else{
 filtered.forEach(item=>{
 list.innerHTML+=`
 <div class="card">
   <img src="${item.group_photo||'https://via.placeholder.com/70'}" class="group-img">
   <div class="group-info">
     <div class="group-name">${item.group_name}</div>
     <div class="caption">${item.caption}</div>
   </div>
 </div>`;
 });
}

list.style.opacity=1;

},150);
}

renderSchedule();

calendar.addEventListener("change",renderSchedule);
accountFilter.addEventListener("change",renderSchedule);

});

</script>

</body>
  </html>
  
